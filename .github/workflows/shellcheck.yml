name: ShellCheck

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  shellcheck:
    name: ShellCheck Analysis
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Run ShellCheck on all scripts
        run: |
          # Check main script
          shellcheck -e SC2034 -e SC1091 -e SC1090 rom-organizer.sh || echo "Main script has warnings"

          # Check library files
          for file in lib/*.sh; do
            echo "Checking $file..."
            shellcheck -e SC2034 -e SC1091 -e SC1090 "$file" || echo "$file has warnings"
          done

          # Check test files
          for file in tests/*.sh; do
            echo "Checking $file..."
            shellcheck -e SC2034 -e SC1091 -e SC1090 "$file" || echo "$file has warnings"
          done

          echo "ShellCheck analysis complete"
